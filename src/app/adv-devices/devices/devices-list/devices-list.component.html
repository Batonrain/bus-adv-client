<div class="card">
    <p-table #devicesTable [value]="devices"
        [globalFilterFields]="['Name', 'City', 'Technician', 'Status.text']"
        styleClass="p-datatable-striped" [tableStyle]="{ 'min-width': '50rem' }">
        <ng-template pTemplate="caption">
            <div class="flex" style="display: flex!important;">
                <button pButton label="Добавить" (click)="addNewDevice()"></button>
                <span class="p-input-icon-left ml-auto" style="margin-left: auto!important;">
                    <input pInputText type="text" (input)="filter(devicesTable, $event.target)"
                        placeholder="Поиск" />
                </span>
                
            </div>
        </ng-template>
        <ng-template pTemplate="header">
            <tr>
                <th>Название</th>
                <th>Статус</th>
                <th>Город</th>
                <th>Тип размещения</th>
                <th>Техник</th>
                <th>Версия</th>
                <th>Хранилище</th>
                <th>Путь</th>
                <th>Трансляция</th>
                <th></th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-device>
            <tr>
                <td>{{ device.Name }}</td>
                <td>
                    <p-tag [value]="device.Status.text" [severity]="getSeverity(device.Status)"></p-tag>
                </td>
                <td>{{ device.City }}</td>
                <td>{{ device.AllocationType }}</td>
                <td>{{ device.Technician }}</td>
                <td>{{ device.Version }}</td>
                <td>
                    <p-button (click)="showFiles(device.Name, device.Bucket, device.Prefix)"
                    styleClass="p-button-text" label="Смотреть"></p-button>
                </td>
                <td>{{ device.Route }}</td>
                <td>
                    <p-button (click)="showTranslation(device.TranslationUrl)"
                    styleClass="p-button-text" label="Смотреть"></p-button>
                </td>
                <td>
                    <p-button (click)="editDevice(device)"
                    styleClass="p-button-text" label="Редактировать"></p-button>
                </td>
            </tr>
        </ng-template>
    </p-table>
</div>
<p-confirmDialog [style]="{width: '50vw'}"></p-confirmDialog>
<p-toast></p-toast>